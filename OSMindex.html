<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		<title>Easy-Traffic</title>
		<script src="graph.js"></script>
		<style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
    </style>
    </head>
    <body>
	<div id="floating-panel" style="margin-left:-150px">
	<strong>Mihai Viteazu:</strong>
	<select id="AglomeratieMViteaza">
      <option value=300>liber</option>
	  <option value=900>aglomerat</option>
    </select>
	<br>
	<strong>Start:</strong>
    <select id="start">
	    <option value="G">Ostirii - Iorga</option>
        <option value="A">Piata Rahovei</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="H">H</option>
        <option value="I">Catedrala</option>
        <option value="J">J</option>
        <option value="K">K</option>
        <option value="L">L</option>
		<option value="M">M</option>
		<option value="N">N</option>
		<option value="O">O</option>
		<option value="P">P</option>
		<option value="R">R</option>
		<option value="Q">Q</option>
		<option value="X">Rahovei</option>
		<option value="Y">Y</option>
		<option value="Z">Z</option>
		<option value="A1">A1</option>
		<option value="B1">B1</option>
		<option value="C1">C1</option>
		<option value="D1">D1</option>
		<option value="E1">E1</option>
		<option value="F1">F1</option>
		<option value="G1">G1</option>
		<option value="H1">H1</option>
      </select>

      <strong>End:</strong>
      <select id="end">
	    <option value="X">Rahovei</option>
		<option value="I">Catedrala</option>
		<option value="J">J</option>
	    <option value="B">B</option>
        <option value="A">Piata Rahovei</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="G">Ostirii - Iorga</option>
        <option value="K">K</option>
        <option value="L">L</option>
		<option value="M">M</option>
		<option value="N">N</option>
		<option value="O">O</option>
		<option value="P">P</option>
		<option value="R">R</option>
		<option value="Q">Q</option>
		<option value="Y">Y</option>
		<option value="Z">Z</option>
		<option value="A1">A1</option>
		<option value="B1">B1</option>
		<option value="C1">C1</option>
		<option value="D1">D1</option>
		<option value="E1">E1</option>
		<option value="F1">F1</option>
		<option value="G1">G1</option>
		<option value="H1">H1</option>
      </select>
	
	<button type="button" onclick="generate()">Generate</button>
	</div>
        <div id="map" style="top: 0; left: 0; bottom: 0; right: 0; position: fixed;"></div>
         
        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">
		function generate()
		{
			var e = document.getElementById("AglomeratieMViteaza");
            var Aglomeratie = e.options[e.selectedIndex].value;
		    var AglomeratieNum = parseInt(Aglomeratie);
			var start = document.getElementById('start').value;
			var end = document.getElementById('end').value;
			var GPS_Coords = [];
			var curr_GPS_Coord = {Coord_ID: 'A', latitude: 45.777676, longitude: 24.158167, connect: 3, P1: 'B', C1: 120, P2: 'Z', C2: 60, P3: 'J', C3: AglomeratieNum};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'B', latitude: 45.777013, longitude: 24.156993, connect: 3, P1: 'A', C1: 120, P2: 'A1', C2: 30, P3: 'C', C3: 87};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'C', latitude: 45.776509, longitude: 24.156175, connect: 3, P1: 'B', C1: 87, P2: 'C1', C2: 87, P3: 'D', C3: 79};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'D', latitude: 45.776010, longitude: 24.155461, connect: 2, P1: 'C', C1: 87, P2: 'E', C2: 94};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'E', latitude: 45.776640, longitude: 24.154649, connect: 2, P1: 'C1', C1: 81, P2: 'F', C2: 130};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'F', latitude: 45.777555, longitude: 24.153584, connect: 2, P1: 'G', C1: 100, P2: 'B1', C2: 150};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'G', latitude: 45.778268, longitude: 24.152750, connect: 1, P1: 'I', C1: 100};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'I', latitude: 45.778803, longitude: 24.153777, connect: 3, P1: 'G', C1: 100, P2: 'B1', C2: 36, P3: 'J', C3: 100};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'J', latitude: 45.779379, longitude: 24.154783, connect: 3, P1: 'I', C1: 100, P2: 'A', C2: AglomeratieNum, P3: 'K', C3: 130};
			GPS_Coords.push(curr_GPS_Coord);
			
			
			var curr_GPS_Coord = {Coord_ID: 'K', latitude: 45.780011, longitude: 24.155936, connect: 3, P1: 'J', C1: 130, P2: 'E1', C2: 45, P3: 'L', C3: 180};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'L', latitude: 45.781104, longitude: 24.157701, connect: 2, P1: 'K', C1: 180, P2: 'M', C2: 56};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'M', latitude: 45.780761, longitude: 24.158203, connect: 2, P1: 'L', C1: 56, P2: 'N', C2: 12};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'N', latitude: 45.780688, longitude: 24.158079, connect: 2, P1: 'O', C1: 92, P2: 'E1', C2: 180};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'O', latitude: 45.779957, longitude: 24.158573, connect: 3, P1: 'N', C1: 92, P2: 'D1', C2: 190, P3: 'P', C3: 27};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'P', latitude: 45.779932, longitude: 24.158907, connect: 2, P1: 'O', C1: 27, P2: 'R', C2: 29};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'R', latitude: 45.779709, longitude: 24.159127, connect: 3, P1: 'P', C1: 29, P2: 'Q', C2: 68, P3: 'H1', C3: 82};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'Q', latitude: 45.779247, longitude: 24.159677, connect: 3, P1: 'R', C1: 68, P2: 'X', C2: 27, P3: 'G1', C3: 82};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'X', latitude: 45.779084, longitude: 24.159921, connect: 2, P1: 'Q', C1: 27, P2: 'Y', C2: 120};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'Y', latitude: 45.778265, longitude: 24.158926, connect: 3, P1: 'X', C1: 120, P2: 'F1', C2: 30, P3: 'Z', C3: 31};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'Z', latitude: 45.778033, longitude: 24.158644, connect: 3, P1: 'A', C1: 60, P2: 'Y', C2: 31, P3: 'D1', C3: 210};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'A1', latitude: 45.777239, longitude: 24.156753, connect: 3, P1: 'B', C1: 30, P2: 'B1', C2: 350, P3: 'A12', C3: 61};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'B1', latitude: 45.778522, longitude: 24.154107, connect: 4, P1: 'A1', C1: 350, P2: 'I', C2: 36, P3: 'F', C3: 150, P4: 'B12', C4: 63};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'B12', latitude: 45.778868, longitude: 24.154709, connect: 2, P1: 'B1', C1: 63, P2: 'A12', C2: 240};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'A12', latitude: 45.777612, longitude: 24.157287, connect: 2, P1: 'B12', C1: 240, P2: 'A1', C2: 61};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'C1', latitude: 45.777094, longitude: 24.155445, connect: 2, P1: 'A1', C1: 140, P2: 'E', C2: 81};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'D1', latitude: 45.779390, longitude: 24.156632, connect: 2, P1: 'E1', C1: 43, P2: 'Z', C2: 210};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'E1', latitude: 45.779697, longitude: 24.156287, connect: 2, P1: 'D1', C1: 43, P2: 'K', C2: 45};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'F1', latitude: 45.778429, longitude: 24.158657, connect: 3, P1: 'Y', C1: 30, P2: 'G1', C2: 40, P2: 'H1', C3: 120};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'G1', latitude: 45.778688, longitude: 24.158985, connect: 3, P1: 'F1', C1: 40, P2: 'H1', C2: 84, P3: 'Q', C3: 82};
			GPS_Coords.push(curr_GPS_Coord);
			
			var curr_GPS_Coord = {Coord_ID: 'H1', latitude: 45.779215, longitude: 24.158346, connect: 3, P1: 'G1', C1: 84, P2: 'R', C2: 82, P3: 'F1', C3: 120};
			GPS_Coords.push(curr_GPS_Coord);
			
			var map = {
			A: {B: GPS_Coords[0].C1, 	Z:  GPS_Coords[0].C2, 	J:  GPS_Coords[0].C3},
			B: {A: GPS_Coords[1].C1, 	A1: GPS_Coords[1].C2, 	C:  GPS_Coords[1].C3},
			C: {B: GPS_Coords[2].C1, 	C1: GPS_Coords[2].C2,	D:  GPS_Coords[2].C3},
			D: {C: GPS_Coords[3].C1, 	E:  GPS_Coords[3].C2},
			E: {C1: GPS_Coords[4].C1, 	F:  GPS_Coords[4].C2},
			F: {G: GPS_Coords[5].C1, 	B1: GPS_Coords[5].C2},
			G: {I: GPS_Coords[6].C1},
			I: {G: GPS_Coords[7].C1, 	B1: GPS_Coords[7].C2,	J:  GPS_Coords[7].C3},
			J: {I: GPS_Coords[8].C1, 	A:  GPS_Coords[8].C2,	K:  GPS_Coords[8].C3},
			K: {J: GPS_Coords[9].C1, 	E1: GPS_Coords[9].C2,	L:  GPS_Coords[9].C3},
			L: {K: GPS_Coords[10].C1, 	M:  GPS_Coords[10].C2},
			M: {L: GPS_Coords[11].C1, 	N:  GPS_Coords[11].C2},
			N: {O: GPS_Coords[12].C1, 	E1: GPS_Coords[12].C2},
			O: {N: GPS_Coords[13].C1, 	D1: GPS_Coords[13].C2,	P:  GPS_Coords[13].C3},
			P: {O: GPS_Coords[14].C1,	R:  GPS_Coords[14].C2},
			R: {P: GPS_Coords[15].C1,	Q:  GPS_Coords[15].C2,	H1: GPS_Coords[15].C3},
			Q: {R: GPS_Coords[16].C1,	X:  GPS_Coords[16].C2,	G1: GPS_Coords[16].C3},
			X: {Q: GPS_Coords[17].C1,	Y:  GPS_Coords[17].C2},
			Y: {X: GPS_Coords[18].C1,	F1: GPS_Coords[18].C2,	Z:  GPS_Coords[18].C3},
			Z: {A: GPS_Coords[19].C1,	Y:  GPS_Coords[19].C2,	D1: GPS_Coords[19].C3},
			A1: {B: GPS_Coords[20].C1,	B1: GPS_Coords[20].C2,	A12:GPS_Coords[20].C3},
			B1: {A1: GPS_Coords[21].C1,	I:  GPS_Coords[21].C2,	F:  GPS_Coords[21].C3, B12:  GPS_Coords[21].C4},
			C1: {A1: GPS_Coords[22].C1,	E:  GPS_Coords[22].C2},
			D1: {E1: GPS_Coords[23].C1,	Z:  GPS_Coords[23].C2},
			E1: {D1: GPS_Coords[24].C1,	K:  GPS_Coords[24].C2},
			F1: {Y: GPS_Coords[25].C1,	G1: GPS_Coords[25].C2,	H1: GPS_Coords[25].C3},
			G1: {F1: GPS_Coords[26].C1,	H1: GPS_Coords[26].C2,	Q:  GPS_Coords[26].C3},
			H1: {G1: GPS_Coords[27].C1,	R:  GPS_Coords[27].C2,	F1: GPS_Coords[27].C3},
			A12: {B12: GPS_Coords[28].C1,	A1:  GPS_Coords[28].C2},
			B12: {B1: GPS_Coords[29].C1,	A12:  GPS_Coords[29].C2},
			}, graph = new Graph(map);
			var Shortest_Path = graph.findShortestPath(start, end);
			var array = {A:{lat:45.777676, lon:24.158167},
					 B:{lat:45.777013, lon:24.156993},
					 C:{lat:45.776509, lon:24.156175},
					 D:{lat:45.776010, lon:24.155461},
					 E:{lat:45.776640, lon:24.154649},
					 F:{lat:45.777555, lon:24.153584},
					 G:{lat:45.778268, lon:24.152750},
					 I:{lat:45.778803, lon:24.153777},
					 J:{lat:45.779379, lon:24.154783},
					 K:{lat:45.780011, lon:24.155936},
					 L:{lat:45.781104, lon:24.157701},
					 M:{lat:45.780761, lon:24.158203},
					 N:{lat:45.780688, lon:24.158079},
					 O:{lat:45.779957, lon:24.158573},
					 P:{lat:45.779932, lon:24.158907},
					 R:{lat:45.779709, lon:24.159127},
					 Q:{lat:45.779247, lon:24.159677},
					 X:{lat:45.779084, lon:24.159921},
					 Y:{lat:45.778265, lon:24.158926},
					 Z:{lat:45.778033, lon:24.158644},
					 A1:{lat:45.777239, lon:24.156753},
					 B1:{lat:45.778522, lon:24.154107},
					 C1:{lat:45.777094, lon:24.155445},
					 D1:{lat:45.779390, lon:24.156632},
					 E1:{lat:45.779697, lon:24.156287},
					 F1:{lat:45.778429, lon:24.158657},
					 G1:{lat:45.778688, lon:24.158985},
					 H1:{lat:45.779215, lon:24.158346},
					 A12:{lat:45.777612, lon:24.157287},
					 B12:{lat:45.778868, lon:24.154709},
					};
            // Initialize
			
            var mapnik         = new OpenLayers.Layer.OSM(); // OpenStreetMap
            var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
            var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
            var start_position       = new OpenLayers.LonLat(array[Shortest_Path[0]].lon, array[Shortest_Path[0]].lat).transform( fromProjection, toProjection);
            var end_position   = new OpenLayers.LonLat(array[Shortest_Path[Shortest_Path.length-1]].lon, array[Shortest_Path[Shortest_Path.length-1]].lat).transform( fromProjection, toProjection);
            var zoom           = 16; 
             
            var map = new OpenLayers.Map("map");
            map.addLayer(mapnik);
             
            // Add marker
            var start_markers = new OpenLayers.Layer.Markers( "Markers" );
            map.addLayer(start_markers);
            start_markers.addMarker(new OpenLayers.Marker(start_position));
			
			// Add marker
            var end_markers = new OpenLayers.Layer.Markers( "Markers" );
            map.addLayer(end_markers);
            end_markers.addMarker(new OpenLayers.Marker(end_position));
			
			var style = {
                strokeColor: "#00FF00",
                strokeWidth: 10,
            };
			
            for(i=0;i<Shortest_Path.length-1;i++)
			{
				var start_point = new OpenLayers.Geometry.Point(array[Shortest_Path[i]].lon, array[Shortest_Path[i]].lat).transform( fromProjection, toProjection);
				var end_point = new OpenLayers.Geometry.Point(array[Shortest_Path[i+1]].lon, array[Shortest_Path[i+1]].lat).transform( fromProjection, toProjection);
            
				// new vector graphic layer
				var vector = new OpenLayers.Layer.Vector();
             
				// Make line
				var line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([start_point, end_point]), null, style);
				// Add new feature to layer named by vector
				vector.addFeatures([line]);
				// Add vector layer to map
				map.addLayers([vector]);
			}
            // Start and end point
            
             
            map.setCenter(start_position, zoom );
		}
			
        </script>
    </body>
</html>